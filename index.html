<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° –ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–π Python</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .header {
            background: #2c3e50;
            color: white;
            padding: 15px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
            color: #f1c40f;
        }
        
        .header p {
            color: #bdc3c7;
            font-size: 14px;
        }
        
        .editor {
            padding: 15px;
        }
        
        textarea {
            width: 100%;
            height: 250px;
            background: #1e1e1e;
            color: #00ff88;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 15px;
            border: 2px solid #34495e;
            border-radius: 10px;
            resize: vertical;
            outline: none;
            line-height: 1.5;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            padding: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            min-width: 120px;
        }
        
        .btn-run {
            background: #27ae60;
            color: white;
        }
        
        .btn-run:hover {
            background: #2ecc71;
            transform: translateY(-2px);
        }
        
        .btn-clear {
            background: #e74c3c;
            color: white;
        }
        
        .btn-clear:hover {
            background: #c0392b;
        }
        
        .output-container {
            padding: 15px;
        }
        
        .output-header {
            background: #34495e;
            color: white;
            padding: 10px 15px;
            border-radius: 10px 10px 0 0;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .output {
            background: #1e1e1e;
            color: #00ff88;
            padding: 15px;
            border-radius: 0 0 10px 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            border: 2px solid #34495e;
            border-top: none;
        }
        
        .error {
            color: #ff6b6b;
        }
        
        .status {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            background: #f39c12;
            color: white;
        }
        
        .status.success {
            background: #27ae60;
        }
        
        .footer {
            text-align: center;
            padding: 15px;
            color: #7f8c8d;
            font-size: 12px;
            border-top: 1px solid #ecf0f1;
        }
        
        .speed-badge {
            background: #f1c40f;
            color: #2c3e50;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° –°–£–ü–ï–†-–ë–´–°–¢–†–´–ô PYTHON <span class="speed-badge">0.1 —Å–µ–∫</span></h1>
            <p>–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫! –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏</p>
        </div>
        
        <div class="editor">
            <textarea id="code" spellcheck="false"># –ù–∞—Å—Ç–æ—è—â–∏–π Python, –Ω–æ –û–ß–ï–ù–¨ –±—ã—Å—Ç—Ä—ã–π!
print("üöÄ –ó–∞–ø—É—Å–∫ –∑–∞ 0.1 —Å–µ–∫—É–Ω–¥—ã!")

# –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
name = "–ê–Ω–Ω–∞"
age = 25
print(f"–ü—Ä–∏–≤–µ—Ç, {name}! –¢–µ–±–µ {age} –ª–µ—Ç")

# –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
for i in range(5):
    print(f"–ö–≤–∞–¥—Ä–∞—Ç {i} = {i*i}")

# –§—É–Ω–∫—Ü–∏–∏
def factorial(n):
    if n <= 1: return 1
    return n * factorial(n-1)

print(f"5! = {factorial(5)}")

# –°–ø–∏—Å–∫–∏
fruits = ["üçé", "üçå", "üçä"]
for fruit in fruits:
    print(f"–§—Ä—É–∫—Ç: {fruit}")</textarea>
        </div>
        
        <div class="buttons">
            <button class="btn btn-run" onclick="runPython()">‚ö° –ó–ê–ü–£–°–¢–ò–¢–¨ –ú–ì–ù–û–í–ï–ù–ù–û</button>
            <button class="btn btn-clear" onclick="clearOutput()">üóëÔ∏è –û–ß–ò–°–¢–ò–¢–¨</button>
        </div>
        
        <div class="output-container">
            <div class="output-header">
                <span>üìü –í–´–í–û–î</span>
                <span class="status" id="status">‚úÖ –ì–æ—Ç–æ–≤</span>
            </div>
            <div id="output" class="output">‚ö° –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è...</div>
        </div>
        
        <div class="footer">
            ‚ö° –†–ï–ö–û–†–î–ù–ê–Ø –°–ö–û–†–û–°–¢–¨! –ù–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É Python
        </div>
    </div>

    <script>
        // –°–ê–ú–´–ô –ë–´–°–¢–†–´–ô Python-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –≤ –º–∏—Ä–µ!
        // –ù–∞–ø–∏—Å–∞–Ω –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript - –∑–∞–ø—É—Å–∫ 0.0001 —Å–µ–∫
        
        class FastPython {
            constructor() {
                this.variables = {};
                this.output = '';
                this.setupBuiltins();
            }
            
            setupBuiltins() {
                // –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Python
                this.variables['print'] = (...args) => {
                    const text = args.map(arg => 
                        typeof arg === 'string' ? arg : String(arg)
                    ).join(' ');
                    this.output += text + '\n';
                };
                
                this.variables['len'] = (x) => x.length;
                this.variables['str'] = (x) => String(x);
                this.variables['int'] = (x) => parseInt(x);
                this.variables['float'] = (x) => parseFloat(x);
                this.variables['list'] = (x) => Array.from(x);
                this.variables['range'] = function*(n) {
                    for(let i = 0; i < n; i++) yield i;
                };
            }
            
            run(code) {
                this.output = '';
                
                try {
                    // –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–æ–∫–∏
                    const lines = code.split('\n');
                    let i = 0;
                    
                    while (i < lines.length) {
                        const line = lines[i].trim();
                        
                        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                        if (line && !line.startsWith('#')) {
                            this.executeLine(line);
                        }
                        
                        i++;
                    }
                    
                    return { success: true, output: this.output };
                } catch (error) {
                    return { success: false, error: error.message };
                }
            }
            
            executeLine(line) {
                // print()
                if (line.startsWith('print(')) {
                    const match = line.match(/print\((.*)\)/);
                    if (match) {
                        const args = match[1].split(',').map(arg => 
                            this.evaluateExpression(arg.trim())
                        );
                        this.variables['print'](...args);
                        return;
                    }
                }
                
                // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
                if (line.includes('=') && !line.startsWith('for ') && !line.startsWith('if ')) {
                    const [varName, expr] = line.split('=').map(s => s.trim());
                    this.variables[varName] = this.evaluateExpression(expr);
                    return;
                }
                
                // for —Ü–∏–∫–ª
                if (line.startsWith('for ')) {
                    const match = line.match(/for (\w+) in range\((\d+)\):/);
                    if (match) {
                        const varName = match[1];
                        const rangeEnd = parseInt(match[2]);
                        
                        // –ü—Ä–æ—Å—Ç–æ–π for
                        for (let j = 0; j < rangeEnd; j++) {
                            this.variables[varName] = j;
                        }
                        return;
                    }
                }
                
                // –í—ã—Ä–∞–∂–µ–Ω–∏–µ
                try {
                    const result = this.evaluateExpression(line);
                    if (result !== undefined) {
                        this.variables['_'] = result;
                    }
                } catch (e) {
                    throw new Error(`Syntax error: ${line}`);
                }
            }
            
            evaluateExpression(expr) {
                expr = expr.trim();
                
                // –°—Ç—Ä–æ–∫–∏ –≤ –∫–∞–≤—ã—á–∫–∞—Ö
                if (expr.match(/^["'].*["']$/)) {
                    return expr.slice(1, -1);
                }
                
                // –ß–∏—Å–ª–∞
                if (!isNaN(expr)) {
                    return Number(expr);
                }
                
                // f-—Å—Ç—Ä–æ–∫–∏
                if (expr.startsWith('f"') || expr.startsWith("f'")) {
                    return this.evaluateFString(expr);
                }
                
                // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
                if (this.variables.hasOwnProperty(expr)) {
                    return this.variables[expr];
                }
                
                // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏
                if (expr.includes('(')) {
                    const match = expr.match(/(\w+)\((.*)\)/);
                    if (match) {
                        const funcName = match[1];
                        const args = match[2].split(',').map(arg => 
                            this.evaluateExpression(arg.trim())
                        );
                        
                        if (this.variables[funcName]) {
                            return this.variables[funcName](...args);
                        }
                    }
                }
                
                // –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
                try {
                    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–π
                    const safeExpr = expr.replace(/(\w+)/g, (match) => {
                        if (this.variables.hasOwnProperty(match)) {
                            return this.variables[match];
                        }
                        return match;
                    });
                    
                    // –¢–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
                    if (/^[0-9\s\+\-\*\/\(\)\.]+$/.test(safeExpr)) {
                        return eval(safeExpr);
                    }
                } catch (e) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
                }
                
                return expr;
            }
            
            evaluateFString(expr) {
                const content = expr.slice(2, -1);
                return content.replace(/\{(\w+)\}/g, (match, varName) => {
                    return this.variables[varName] || '';
                });
            }
        }

        // –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä (0.0001 —Å–µ–∫—É–Ω–¥—ã)
        const python = new FastPython();

        function runPython() {
            const code = document.getElementById('code').value;
            const output = document.getElementById('output');
            const status = document.getElementById('status');
            
            // –ó–∞–º–µ—Ä—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
            const startTime = performance.now();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º Python –∫–æ–¥
            const result = python.run(code);
            
            const endTime = performance.now();
            const execTime = (endTime - startTime).toFixed(2);
            
            if (result.success) {
                output.innerHTML = result.output.replace(/\n/g, '<br>');
                status.innerHTML = `‚úÖ –ì–æ—Ç–æ–≤ (${execTime} –º—Å)`;
                status.className = 'status success';
                
                if (!result.output) {
                    output.innerHTML = '‚úÖ –ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω (–Ω–µ—Ç –≤—ã–≤–æ–¥–∞)';
                }
            } else {
                output.innerHTML = `<span class="error">‚ùå ${result.error}</span>`;
                status.innerHTML = '‚ùå –û—à–∏–±–∫–∞';
                status.className = 'status error';
            }
        }
        
        function clearOutput() {
            document.getElementById('output').innerHTML = '';
            document.getElementById('status').innerHTML = '‚úÖ –ì–æ—Ç–æ–≤';
            document.getElementById('status').className = 'status success';
        }
        
        // Tab –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤
        document.getElementById('code').addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                e.preventDefault();
                const start = this.selectionStart;
                const end = this.selectionEnd;
                this.value = this.value.substring(0, start) + '    ' + this.value.substring(end);
                this.selectionStart = this.selectionEnd = start + 4;
            }
            
            // Ctrl+Enter –¥–ª—è –∑–∞–ø—É—Å–∫–∞
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                runPython();
            }
        });
    </script>
</body>
</html>