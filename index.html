<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Roblox –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .card {
      background: white;
      padding: 20px;
      border-radius: 14px;
      width: 360px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.15);
      text-align: center;
    }
    h1 {
      margin-bottom: 15px;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    button {
      cursor: pointer;
      background: #007aff;
      color: white;
      border: none;
    }
    .avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: #ddd;
      margin: 10px auto;
      background-size: cover;
      background-position: center;
    }
    .nickname {
      font-size: 18px;
      font-weight: bold;
    }
    .username {
      color: #666;
      margin-bottom: 6px;
    }
    .info {
      font-size: 13px;
      color: #444;
      margin: 2px 0;
    }
    .status {
      margin-top: 8px;
      font-weight: bold;
    }
    .status.online { color: green; }
    .status.offline { color: gray; }
    .section {
      margin-top: 10px;
      text-align: left;
    }
    .section h3 {
      margin: 6px 0;
      font-size: 16px;
      border-bottom: 1px solid #ddd;
    }
    .list-item {
      font-size: 13px;
      margin-left: 10px;
    }
  </style>
</head>
<body>

<div class="card">
  <h1>Roblox –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h1>

  <input id="usernameInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ Username" />
  <button onclick="loadUser()">–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>

  <div id="avatar" class="avatar"></div>
  <div id="nickname" class="nickname"></div>
  <div id="username" class="username"></div>
  <div id="userid" class="info"></div>
  <div id="created" class="info"></div>
  <div id="status" class="status"></div>

  <div class="section" id="friendsSection">
    <h3>–î—Ä—É–∑—å—è</h3>
    <div id="friendsList">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>

  <div class="section" id="groupsSection">
    <h3>–ì—Ä—É–ø–ø—ã</h3>
    <div id="groupsList">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>

  <div class="section" id="badgesSection">
    <h3>–ó–Ω–∞—á–∫–∏</h3>
    <div id="badgesList">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>
</div>

<script>
async function loadUser() {
  const username = document.getElementById("usernameInput").value.trim();
  if (!username) return;

  // 1. UserId
  const userRes = await fetch("https://users.roblox.com/v1/usernames/users", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ usernames: [username], excludeBannedUsers: true })
  });

  const userData = await userRes.json();
  if (!userData.data || !userData.data[0]) {
    alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω");
    return;
  }

  const user = userData.data[0];

  // 2. User Info
  const infoRes = await fetch(`https://users.roblox.com/v1/users/${user.id}`);
  const info = await infoRes.json();

  // 3. Avatar
  const avatarRes = await fetch(`https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${user.id}&size=150x150&format=Png&isCircular=true`);
  const avatarData = await avatarRes.json();

  // 4. Status
  const presenceRes = await fetch("https://presence.roblox.com/v1/presence/users", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ userIds: [user.id] })
  });
  const presenceData = await presenceRes.json();
  const presence = presenceData.userPresences[0];

  // 5. Friends
  const friendsRes = await fetch(`https://friends.roblox.com/v1/users/${user.id}/friends?sortOrder=Asc&limit=5`);
  const friendsData = await friendsRes.json();

  // 6. Groups
  const groupsRes = await fetch(`https://groups.roblox.com/v2/users/${user.id}/groups/roles`);
  const groupsData = await groupsRes.json();

  // 7. Badges
  const badgesRes = await fetch(`https://badges.roblox.com/v1/users/${user.id}/badges?limit=5`);
  const badgesData = await badgesRes.json();

  // Update UI
  document.getElementById("avatar").style.backgroundImage = `url('${avatarData.data[0].imageUrl}')`;
  document.getElementById("nickname").textContent = info.displayName;
  document.getElementById("username").textContent = "@" + info.name;
  document.getElementById("userid").textContent = "User ID: " + info.id;
  document.getElementById("created").textContent = "–°–æ–∑–¥–∞–Ω: " + new Date(info.created).toLocaleDateString();

  const statusEl = document.getElementById("status");
  if (presence.userPresenceType === 2) {
    statusEl.textContent = "üü¢ –û–Ω–ª–∞–π–Ω";
    statusEl.className = "status online";
  } else {
    statusEl.textContent = "‚ö´ –û—Ñ—Ñ–ª–∞–π–Ω";
    statusEl.className = "status offline";
  }

  // Friends List
  const friendsList = document.getElementById("friendsList");
  friendsList.innerHTML = friendsData.data.length ? friendsData.data.map(f => `<div class='list-item'>${f.displayName} (@${f.name})</div>`).join('') : '–ù–µ—Ç –¥—Ä—É–∑–µ–π';

  // Groups List
  const groupsList = document.getElementById("groupsList");
  groupsList.innerHTML = groupsData.data.length ? groupsData.data.map(g => `<div class='list-item'>${g.role.name} –≤ ${g.group.name}</div>`).join('') : '–ù–µ—Ç –≥—Ä—É–ø–ø';

  // Badges List
  const badgesList = document.getElementById("badgesList");
  badgesList.innerHTML = badgesData.data.length ? badgesData.data.map(b => `<div class='list-item'>${b.name}</div>`).join('') : '–ù–µ—Ç –∑–Ω–∞—á–∫–æ–≤';
}

document.getElementById("usernameInput").addEventListener("keydown", e => {
  if (e.key === "Enter") loadUser();
});
</script>

</body>
</html>